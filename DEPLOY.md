# MySocial 平台上线部署与合规指南

作为您的社交平台合规顾问，我强烈建议您**必须购买域名**并进行正规部署。

## 为什么必须要有域名？

1.  **数据安全 (HTTPS)**
    *   **核心原因**：我们收集用户的**手机号、密码、身份证照片**。
    *   **风险**：如果没有域名，就无法申请 SSL 证书（即浏览器地址栏的“小锁”图标）。
    *   **后果**：用户数据在传输过程中是“裸奔”的，极易被黑客窃取。这严重违反《个人信息保护法》及全球主流隐私法规。
2.  **用户信任**
    *   用户不会在一个 IP 地址（如 `123.45.67.89`）上提交身份证信息。域名是正规平台的标志。
3.  **合规要求**
    *   如果您将来要开发 App，苹果和安卓商店强制要求后端接口必须是 HTTPS。

---

## 上线步骤清单

### 1. 基础资源准备
- [ ] **购买域名**：
    - 推荐：Namecheap, GoDaddy (海外) 或 阿里云, 腾讯云 (国内)。
    - 建议：选择 `.com` 或 `.social` 等通用后缀。
- [ ] **购买云服务器 (VPS)**：
    - 推荐：AWS, DigitalOcean, Vultr (海外业务首选) 或 阿里云 (国内业务)。
    - 配置：起步建议 2核 CPU / 4G 内存 / Ubuntu 22.04 系统。

### 2. 生产环境配置 (以 Ubuntu 为例)

#### A. 安全设置 (环境变量)
在服务器上，不要直接修改代码，而是创建 `.env` 文件来管理密钥：
```bash
export SECRET_KEY="这里填写一个非常长且随机的字符串"
export ENV="production"
```

#### B. 安装 Nginx (反向代理)
Nginx 用于处理用户请求并转发给我们的 Python 程序，同时处理 HTTPS 加密。
```bash
sudo apt update
sudo apt install nginx
```

#### C. 申请免费 SSL 证书
使用 Certbot 工具为您的域名自动配置 HTTPS：
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### 3. 数据隐私合规检查
上线前请再次确认：
- [ ] **数据库权限**：确保 `social.db` 文件无法通过 Web 直接下载（我们在代码中已经处理，但 Nginx 配置需再次确保禁止访问 `.db` 文件）。
- [ ] **私密目录保护**：`private_uploads/id_cards` 目录**严禁**配置为 Nginx 静态资源目录。只有经过身份验证的代码逻辑才能读取该目录。
- [ ] **用户协议链接**：确保注册页面的《用户协议》链接指向真实的 HTML 页面。

---

## 常见问题

**Q: 我可以直接用家里的电脑当服务器吗？**
A: **绝对不行**。
1.  **断电断网**：服务不稳定。
2.  **IP 变动**：公网 IP 经常变，用户连不上。
3.  **安全风险**：家里的网络防火墙薄弱，容易导致用户数据泄露（尤其是身份证照片）。

**Q: 如果我的目标用户在海外，服务器买在哪里？**
A: 建议买在**目标用户群体附近**或**美国西海岸**（全球访问速度较均衡）。避免买在中国大陆（如果未备案会被防火墙拦截，且海外访问慢）。
