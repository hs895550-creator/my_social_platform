<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalAsianElite - å…¨çƒäºšè£”ç²¾è‹±ç›¸äº² (Updated)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-purple: #5e3a6e;
            --primary-purple-dark: #4a2e56;
            --primary-bg: #f5f5f5;
        }
        body {
            /* æ›¿æ¢ä¸ºæ¸©é¦¨çš„ç”·å¥³åˆç…§èƒŒæ™¯ï¼Œä½¿ç”¨ Unsplash é«˜æ¸…æº */
            background: linear-gradient(rgba(74, 46, 86, 0.8), rgba(44, 26, 51, 0.9)), 
                        url('https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=2459&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar {
            background-color: rgba(0,0,0,0.2);
        }
        .navbar-brand {
            color: white !important;
            font-weight: bold;
            font-size: 1.5rem;
        }
        .main-container {
            margin-top: 80px;
        }
        .auth-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .auth-header {
            background-color: var(--primary-purple);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .nav-tabs .nav-link {
            color: #666;
            border: none;
            border-bottom: 3px solid transparent;
        }
        .nav-tabs .nav-link.active {
            color: var(--primary-purple);
            border-bottom: 3px solid var(--primary-purple);
            background: transparent;
            font-weight: bold;
        }
        .btn-purple {
            background-color: var(--primary-purple);
            color: white;
            border: none;
        }
        .btn-purple:hover {
            background-color: var(--primary-purple-dark);
            color: white;
        }
        .feature-list {
            color: white;
            margin-top: 50px;
        }
        .feature-list h2 {
            font-weight: 300;
            margin-bottom: 30px;
        }
        .feature-item {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .feature-icon {
            font-size: 2rem;
            margin-right: 15px;
            color: #ffd700;
        }
        .lang-switch {
            color: white;
            text-decoration: none;
            opacity: 0.8;
        }
        .lang-switch:hover {
            opacity: 1;
            color: white;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-gem me-2" viewBox="0 0 16 16">
                <path d="M3.1.7a.5.5 0 0 1 .4-.2h9a.5.5 0 0 1 .4.2l2.976 3.974c.149.185.156.45.01.644L8.4 15.3a.5.5 0 0 1-.8 0L.1 5.3a.5.5 0 0 1 .01-.644L3.1.7z"/>
            </svg>
            GlobalAsianElite
        </a>
        <div class="ms-auto">
            <div class="dropdown">
                <a class="lang-switch dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" id="currentLang">
                    ğŸŒ ä¸­æ–‡ (ç®€ä½“)
                </a>
                <ul class="dropdown-menu dropdown-menu-end" id="lang-dropdown">
                    <!-- JS populated -->
                    <li><a class="dropdown-item" href="#" onclick="changeLanguage('zh')">ä¸­æ–‡ (ç®€ä½“)</a></li>
                    <li><a class="dropdown-item" href="#" onclick="changeLanguage('en')">English</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="container main-container">
    <div class="row justify-content-center align-items-center">
        <!-- å·¦ä¾§å®£ä¼ è¯­ -->
        <div class="col-md-6 d-none d-md-block feature-list">
            <h2 data-i18n="slogan">ä¸“æ³¨äºæ¬§ç¾å—ç¾æ´²çš„ä¼˜è´¨ç›¸äº²ç½‘</h2>
            <div class="feature-item">
                <span class="feature-icon">ğŸ’</span>
                <div>
                    <h5 data-i18n="feature1_title">é«˜ç«¯ç²¾è‹±ç¤¾åŒº</h5>
                    <p data-i18n="feature1_desc">æ±‡èšå…¨çƒå„åœ°çš„äºšè£”é«˜å‡€å€¼å•èº«äººå£«</p>
                </div>
            </div>
            <div class="feature-item">
                <span class="feature-icon">ğŸ”’</span>
                <div>
                    <h5 data-i18n="feature2_title">ä¸¥æ ¼èµ„è´¨å®¡æ ¸</h5>
                    <p data-i18n="feature2_desc">å®åè®¤è¯ + èµ„äº§å®¡æ ¸ï¼Œç¡®ä¿åœˆå±‚çº¯å‡€</p>
                </div>
            </div>
            <div class="feature-item">
                <span class="feature-icon">â„¹ï¸</span>
                <div>
                    <h5><a href="/about" class="text-white text-decoration-none" data-i18n="about_title_nav">å…³äºæˆ‘ä»¬</a></h5>
                    <p data-i18n="about_desc_nav">äº†è§£æˆ‘ä»¬çš„ä½¿å‘½ä¸æ„¿æ™¯</p>
                </div>
            </div>
            <div class="feature-item">
                <span class="feature-icon">ğŸ“œ</span>
                <div>
                    <h5><a href="/terms" class="text-white text-decoration-none" data-i18n="terms_title">ä½¿ç”¨æ¡æ¬¾</a></h5>
                    <p data-i18n="terms_desc">äº†è§£æ‚¨çš„æƒåˆ©å’Œä¹‰åŠ¡</p>
                </div>
            </div>
            <div class="feature-item">
                <span class="feature-icon">ğŸ›¡ï¸</span>
                <div>
                    <h5><a href="/privacy" class="text-white text-decoration-none" data-i18n="privacy_title">éšç§å£°æ˜</a></h5>
                    <p data-i18n="privacy_desc">æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤æ‚¨çš„æ•°æ®</p>
                </div>
            </div>
            <div class="feature-item">
                <span class="feature-icon">ğŸ”’</span>
                <div>
                    <h5><a href="/safety" class="text-white text-decoration-none" data-i18n="safety_title">ç½‘ç»œäº¤å‹å®‰å…¨</a></h5>
                    <p data-i18n="safety_desc">å®‰å…¨äº¤å‹æŒ‡å—ä¸é˜²éª—æç¤º</p>
                </div>
            </div>
        </div>

        <!-- å³ä¾§ç™»å½•æ³¨å†Œæ¡† -->
        <div class="col-md-5">
            <div class="auth-card">
                <div class="auth-header">
                    <h4 data-i18n="start_now">ç°åœ¨å°±å¼€å§‹ï¼</h4>
                </div>
                <div class="card-body p-4">
                    {% if error %}
                    <div class="alert alert-danger">{{ error }}</div>
                    {% endif %}

                    <ul class="nav nav-tabs nav-fill mb-4" id="authTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link {% if active_tab != 'login' %}active{% endif %}" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" data-i18n="register_tab">å…è´¹æ³¨å†Œ</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link {% if active_tab == 'login' %}active{% endif %}" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" data-i18n="login_tab">ä¼šå‘˜ç™»å½•</button>
                        </li>
                    </ul>

                    <div class="tab-content" id="authTabContent">
                        <!-- æ³¨å†Œè¡¨å• -->
                        <div class="tab-pane fade {% if active_tab != 'login' %}show active{% endif %}" id="register" role="tabpanel">
                            <form action="/register" method="post" onsubmit="return prepareRegister()" novalidate>
                                <div class="input-group mb-3">
                                    <select class="form-select" id="country-select" style="max-width: 120px;" onchange="updateCountry()">
                                        <!-- JSå¡«å…… -->
                                    </select>
                                    <input type="tel" class="form-control" id="phone-input" placeholder="æ‰‹æœºå·ç " data-i18n-placeholder="phone_placeholder" required>
                                    <input type="hidden" name="phone" id="real-phone">
                                </div>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" name="code" placeholder="éªŒè¯ç " required>
                                    <button class="btn btn-outline-secondary" type="button" id="btn-send-code" onclick="sendSmsCode()">è·å–éªŒè¯ç </button>
                                </div>
                                <div class="mb-3">
                                    <input type="password" class="form-control" name="password" placeholder="è®¾ç½®å¯†ç " data-i18n-placeholder="password_setup_placeholder" required>
                                </div>
                                <div class="row mb-3">
                                    <div class="col">
                                        <select class="form-select" name="gender">
                                            <option value="male" data-i18n="im_male">æˆ‘æ˜¯ç”·å£«</option>
                                            <option value="female" data-i18n="im_female">æˆ‘æ˜¯å¥³å£«</option>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <select class="form-select" name="age_range" id="age-select">
                                            <!-- JSå¡«å…… 30-100 -->
                                        </select>
                                    </div>
                                </div>
                                <input type="hidden" name="country" id="real-country">
                                
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="agree" name="agreement" required>
                                    <label class="form-check-label small text-muted" for="agree">
                                        <span data-i18n="agree_text">æˆ‘å·²é˜…è¯»å¹¶åŒæ„</span> <a href="/terms" target="_blank" data-i18n="terms">æœåŠ¡æ¡æ¬¾</a> <span data-i18n="and">å’Œ</span> <a href="/privacy" target="_blank" data-i18n="privacy">éšç§å£°æ˜</a><span data-i18n="age_confirm">ã€‚æˆ‘ç¡®è®¤æˆ‘å·²å¹´æ»¡30å²ã€‚</span>
                                    </label>
                                </div>

                                <button type="submit" class="btn btn-purple w-100 py-2" data-i18n="view_singles">æŸ¥çœ‹å•èº«ä¼šå‘˜ â€º</button>
                            </form>
                        </div>

                        <!-- ç™»å½•è¡¨å• -->
                        <div class="tab-pane fade {% if active_tab == 'login' %}show active{% endif %}" id="login" role="tabpanel">
                            <form action="/login" method="post">
                                <div class="mb-3">
                                    <input type="tel" class="form-control" name="phone" placeholder="æ‰‹æœºå·ç " data-i18n-placeholder="phone_placeholder" required>
                                </div>
                                <div class="mb-3">
                                    <input type="password" class="form-control" name="password" placeholder="å¯†ç " data-i18n-placeholder="password_placeholder" required>
                                </div>
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="remember">
                                    <label class="form-check-label text-muted" for="remember" data-i18n="keep_logged_in">ä¿æŒç™»å½•çŠ¶æ€</label>
                                </div>
                                <button type="submit" class="btn btn-purple w-100 py-2" data-i18n="login_btn">ç™»å½•</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Success Stories -->
<div class="container py-5">
    <h2 class="text-center mb-5" style="color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.5);" data-i18n="success_stories_title">æˆåŠŸæ¡ˆä¾‹</h2>
    <div class="row">
        <!-- Story 1 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm" style="background: rgba(255,255,255,0.95);">
                <div class="card-body text-center">
                    <img src="https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=200&h=200&fit=crop&crop=faces" class="rounded-circle mb-3 shadow" style="width: 100px; height: 100px; object-fit: cover;">
                    <h5 class="card-title fs-6 fw-bold" data-i18n="story1_title">ä¸ºäº†å¥¹ï¼Œé£åŠä¸ªåœ°çƒä¹Ÿå€¼å¾—</h5>
                    <p class="card-text small text-muted" data-i18n="story1_desc">æˆ‘ä»¬ä¸€è·¯èµ°æ¥å‘ç°ï¼Œæˆ‘ä»¬éƒ½æƒ³è¦çš„éƒ½ä¸€æ ·ï¼Œæˆ‘ä»¬æ˜¯å¤©ä½œä¹‹åˆã€‚æˆ‘ä»æ²¡æƒ³è¿‡ä¼šåœ¨è¿™ä¸ªç½‘ç«™ä¸Šé‡åˆ°åƒå¥¹è¿™æ ·çš„äººã€‚</p>
                </div>
            </div>
        </div>
        <!-- Story 2 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm" style="background: rgba(255,255,255,0.95);">
                <div class="card-body text-center">
                    <img src="https://images.unsplash.com/photo-1621600411688-4be93cd68504?w=200&h=200&fit=crop&crop=faces" class="rounded-circle mb-3 shadow" style="width: 100px; height: 100px; object-fit: cover;">
                    <h5 class="card-title fs-6 fw-bold" data-i18n="story2_title">Tomå¯¹æˆ‘è¯´ï¼Œå¯¹æˆ‘ç»å¯¹æœ‰å…´è¶£</h5>
                    <p class="card-text small text-muted" data-i18n="story2_desc">å› ä¸ºæˆ‘å­¤èº«ä¸€äººåœ¨ç¾å›½ï¼Œæƒ³æ‰¾ä¸€ä¸ªèƒ½ä¸æˆ‘å…±åº¦ä½™ç”Ÿçš„äººï¼Œåœ¨è¿™é‡Œæ‰¾åˆ°äº†ç¿»è¯‘åŠŸèƒ½ï¼Œæ²Ÿé€šæ— éšœç¢ã€‚</p>
                </div>
            </div>
        </div>
        <!-- Story 3 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm" style="background: rgba(255,255,255,0.95);">
                <div class="card-body text-center">
                    <img src="https://images.unsplash.com/photo-1542596594-649edbc13630?w=200&h=200&fit=crop&crop=faces" class="rounded-circle mb-3 shadow" style="width: 100px; height: 100px; object-fit: cover;">
                    <h5 class="card-title fs-6 fw-bold" data-i18n="story3_title">æ‰¾åˆ°å¾ˆæ£’çš„ä¼´ä¾£</h5>
                    <p class="card-text small text-muted" data-i18n="story3_desc">æˆ‘åœ¨è¿™é‡Œæ‰¾åˆ°äº†å¾ˆæ£’çš„ä¼´ä¾£ã€‚æˆ‘ä»¬äº2019å¹´ç›¸è¯†ï¼Œå¹¶åœ¨å¹³å°ä¸Šäº¤æµäº†4å¹´ã€‚</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <!-- Story 4 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm" style="background: rgba(255,255,255,0.95);">
                <div class="card-body text-center">
                    <img src="https://images.unsplash.com/photo-1523419409543-a5e549c1faa9?w=200&h=200&fit=crop&crop=faces" class="rounded-circle mb-3 shadow" style="width: 100px; height: 100px; object-fit: cover;">
                    <h5 class="card-title fs-6 fw-bold" data-i18n="story4_title">æ‰¾åˆ°äº†ä¸–ç•Œä¸Šæœ€å®Œç¾çš„ç”·äºº</h5>
                    <p class="card-text small text-muted" data-i18n="story4_desc">è°¢è°¢ã€‚è®¤è¯†ä¸¤ä¸ªæœˆåï¼Œæˆ‘çš„å¦ä¸€åŠæ¥çœ‹æˆ‘äº†ã€‚æˆ‘ä»¬ä¸€ç›´å¾ˆç›¸çˆ±ï¼Œæˆ‘ä»¬è§äº†å½¼æ­¤çš„çˆ¶æ¯ã€‚</p>
                </div>
            </div>
        </div>
        <!-- Story 5 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm" style="background: rgba(255,255,255,0.95);">
                <div class="card-body text-center">
                    <img src="https://images.unsplash.com/photo-1511895426328-dc8714191300?w=200&h=200&fit=crop&crop=faces" class="rounded-circle mb-3 shadow" style="width: 100px; height: 100px; object-fit: cover;">
                    <h5 class="card-title fs-6 fw-bold" data-i18n="story5_title">æ„Ÿè°¢æ‚¨è®¿é—®</h5>
                    <p class="card-text small text-muted" data-i18n="story5_desc">ä»–å–„è‰¯æœ‰è¶£å¯çˆ±ä¸è´£ä»»å¿ƒï¼Œæ‡‚å¾—å°Šé‡å¥³æ€§ï¼ŒæŠŠå®¶äººæ”¾åœ¨ç¬¬ä¸€ä½ï¼Œæ‰€ä»¥ä»–æ˜¯æˆ‘è§è¿‡æœ€å®Œç¾çš„ç”·äººã€‚</p>
                </div>
            </div>
        </div>
        <!-- Story 6 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm" style="background: rgba(255,255,255,0.95);">
                <div class="card-body text-center">
                    <img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?w=200&h=200&fit=crop&crop=faces" class="rounded-circle mb-3 shadow" style="width: 100px; height: 100px; object-fit: cover;">
                    <h5 class="card-title fs-6 fw-bold" data-i18n="story6_title">çˆ±å°±åœ¨é‚£é‡Œâ€”â€”ä¸è¦æ”¾å¼ƒ</h5>
                    <p class="card-text small text-muted" data-i18n="story6_desc">æˆ‘ä»¬ä¿©éƒ½æŠ±ç€æ‰¾åˆ°ç»ˆèº«ä¼´ä¾£çš„æ„¿æœ›åŠ å…¥äº†å¹³å°ï¼Œè€Œç°åœ¨æˆ‘ä»¬æ‰¾åˆ°äº†â€”â€”è¿™è¯æ˜å®ƒçœŸçš„æœ‰æ•ˆï¼</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- About & Contact -->
<div class="container-fluid bg-light py-5 mt-5" style="color: #333;">
    <div class="container">
        <div class="row">
            <div class="col-md-6 mb-4">
                <h3 data-i18n="about_title" style="color: #5e3a6e;">ä»€ä¹ˆæ˜¯ GlobalAsianElite?</h3>
                <p class="lead" data-i18n="about_desc_1">GlobalAsianElite æ˜¯ä¸“é—¨ååŠ©æ¥è‡ªæ¬§ç¾åŠå—ç¾å›½å®¶å•èº«ç”·å¥³å¯»æ‰¾å©šæ‹å¯¹è±¡çš„äº¤å‹ç½‘ç«™ã€‚æˆ‘ä»¬æä¾›å‹å–„çš„æœåŠ¡åŠå…ˆè¿›çš„æœç´¢ç³»ç»Ÿã€‚</p>
                <a href="/about" class="btn btn-outline-primary" data-i18n="learn_more">äº†è§£æ›´å¤š</a>
            </div>
            <div class="col-md-6 mb-4">
                <h3 data-i18n="why_choose_title" style="color: #5e3a6e;">ä¸ºä»€ä¹ˆé€‰æ‹© GlobalAsianElite?</h3>
                <p class="text-muted" data-i18n="why_choose_desc">ä¸åŒäºå…¶ä»–ç½‘ç«™ï¼ŒGlobalAsianElite æä¾›å‹å–„çš„ä¸ªäººåŒ–æœåŠ¡å¹¶ç»“åˆå…ˆè¿›çš„æŠ€æœ¯ã€‚æˆ‘ä»¬æ˜ç™½ï¼Œæœ‰æ—¶å€™é‚£ä¸ªå±äºæ‚¨çš„å¦ä¸€åŠå°±åœ¨åœ°çƒçš„å¦ä¸€ç«¯ï¼</p>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-white py-4">
    <div class="container text-center">
        <div class="mb-3">
            <a href="/about" class="text-white-50 mx-2 text-decoration-none small" data-i18n="footer_about">å…³äºæˆ‘ä»¬</a>
            <a href="/safety" class="text-white-50 mx-2 text-decoration-none small" data-i18n="footer_contact">è”ç³»æˆ‘ä»¬</a>
            <a href="/terms" class="text-white-50 mx-2 text-decoration-none small" data-i18n="footer_terms">ä½¿ç”¨æ¡æ¬¾</a>
            <a href="/privacy" class="text-white-50 mx-2 text-decoration-none small" data-i18n="footer_privacy">éšç§æ”¿ç­–</a>
            <a href="/safety" class="text-white-50 mx-2 text-decoration-none small" data-i18n="footer_safety">ç½‘ç»œäº¤å‹å®‰å…¨</a>
        </div>
        <p class="small text-white-50">Â© 2020 GlobalAsianElite. All rights reserved.</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/translations.js"></script>
<script src="/static/js/country_codes.js"></script>
<script>
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
        // 1. åˆå§‹åŒ–è¯­è¨€
        initLanguage();
        
        // 2. åˆå§‹åŒ–å›½å®¶åŒºå·
        initCountryCodes();

        // 3. å¡«å……å¹´é¾„ä¸‹æ‹‰æ¡†
        populateAgeSelect();
    });

    // --- è¯­è¨€å¤„ç†é€»è¾‘ ---
    function initLanguage() {
        const savedLang = localStorage.getItem('lang') || 'zh';
        
        // å¡«å……è¯­è¨€ä¸‹æ‹‰èœå•
        const dropdown = document.getElementById('lang-dropdown');
        if (dropdown && typeof translations !== 'undefined') {
            dropdown.innerHTML = ''; // æ¸…ç©ºæ—§çš„
            Object.keys(translations).forEach(lang => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.className = 'dropdown-item';
                a.href = '#';
                a.onclick = (e) => { e.preventDefault(); changeLanguage(lang); };
                a.innerText = translations[lang].lang_name;
                li.appendChild(a);
                dropdown.appendChild(li);
            });
        }

        // åº”ç”¨å½“å‰è¯­è¨€
        changeLanguage(savedLang);
    }

    function changeLanguage(lang) {
        localStorage.setItem('lang', lang);
        
        // æ›´æ–°é¡¶éƒ¨æ˜¾ç¤º
        const currentLangSpan = document.getElementById('currentLang');
        if (currentLangSpan && translations[lang]) {
            currentLangSpan.innerText = 'ğŸŒ ' + translations[lang].lang_name;
        }

        // æ›´æ–°æ‰€æœ‰å¸¦æœ‰ data-i18n å±æ€§çš„å…ƒç´ 
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                element.innerText = translations[lang][key];
            }
        });

        // æ›´æ–°æ‰€æœ‰å¸¦æœ‰ data-i18n-placeholder å±æ€§çš„å…ƒç´ 
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            if (translations[lang] && translations[lang][key]) {
                element.placeholder = translations[lang][key];
            }
        });
        
        // æ›´æ–°ä¸‹æ‹‰æ¡†é€‰é¡¹ï¼ˆå¦‚æœéœ€è¦ï¼‰
        updateSelectOptions(lang);
    }

    function updateSelectOptions(lang) {
        // æ€§åˆ«
        const genderSelect = document.querySelector('select[name="gender"]');
        if (genderSelect && translations[lang]) {
            genderSelect.options[0].text = translations[lang]['im_male'] || 'æˆ‘æ˜¯ç”·å£«';
            genderSelect.options[1].text = translations[lang]['im_female'] || 'æˆ‘æ˜¯å¥³å£«';
        }
    }

    // --- å›½å®¶åŒºå·å¤„ç†é€»è¾‘ ---
    function initCountryCodes() {
        const select = document.getElementById('country-select');
        if (!select || typeof countryCodes === 'undefined') return;

        // æŒ‰åç§°æ’åº
        countryCodes.sort((a, b) => a.name.localeCompare(b.name));

        countryCodes.forEach(c => {
            const option = document.createElement('option');
            option.value = c.dial_code;
            option.text = `${c.code} (${c.dial_code})`;
            if (c.code === 'US') option.selected = true; // é»˜è®¤é€‰ç¾å›½
            select.appendChild(option);
        });
        
        // åˆå§‹åŒ–éšè—å­—æ®µ
        updateCountry();
    }

    function updateCountry() {
        const code = document.getElementById('country-select').value;
        // å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°ä¸€äº›UIæ˜¾ç¤ºï¼Œæˆ–è€…åªæ˜¯ç¡®ä¿æäº¤æ—¶ä½¿ç”¨äº†æ­£ç¡®çš„åŒºå·
        // æ³¨æ„ï¼šè¡¨å•æäº¤æ—¶æˆ‘ä»¬éœ€è¦æ‹¼æ¥åŒºå·å’Œæ‰‹æœºå·
    }

    // --- å…¶ä»–è¾…åŠ©é€»è¾‘ ---
    function populateAgeSelect() {
        const select = document.getElementById('age-select');
        if(!select) return;
        for(let i=30; i<=80; i++) {
            const opt = document.createElement('option');
            opt.value = i;
            opt.innerText = i;
            select.appendChild(opt);
        }
    }

    function sendSmsCode() {
        const countryCode = document.getElementById('country-select').value;
        const phoneInput = document.getElementById('phone-input').value;
        if (!phoneInput) {
            alert('è¯·è¾“å…¥æ‰‹æœºå·');
            return;
        }
        const fullPhone = countryCode + phoneInput;
        
        fetch('/send_code', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ phone: fullPhone })
        })
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                alert(data.message + " (æµ‹è¯•éªŒè¯ç å·²åœ¨åå°æ‰“å°)");
                // å€’è®¡æ—¶é€»è¾‘
                let btn = document.getElementById('btn-send-code');
                let count = 60;
                btn.disabled = true;
                let interval = setInterval(() => {
                    count--;
                    btn.innerText = count + 's';
                    if (count <= 0) {
                        clearInterval(interval);
                        btn.disabled = false;
                        btn.innerText = 'è·å–éªŒè¯ç ';
                    }
                }, 1000);
            } else {
                alert(data.message);
            }
        });
    }

    // è¡¨å•æäº¤å‰å¤„ç†
    function prepareRegister() {
        const code = document.getElementById('country-select').value;
        const phone = document.getElementById('phone-input').value;
        const realPhoneInput = document.getElementById('real-phone');
        
        if(realPhoneInput) {
            realPhoneInput.value = code + phone;
        }
        
        const countryText = document.getElementById('country-select').options[document.getElementById('country-select').selectedIndex].text;
            const realCountryInput = document.getElementById('real-country');
            if(realCountryInput) {
                realCountryInput.value = countryText;
            }
        
        return true;
    }
</script>

</body>
</html>
